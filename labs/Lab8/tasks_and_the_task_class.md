## Задачи и класс Task

В основе библиотеки TPL лежит концепция задач, 
каждая из которых описывает отдельную продолжительную операцию. 
В библиотеке классов .NET задача представлена специальным классом - 
классом `Task`, который находится в пространстве имен `System.Threading.Tasks`. 
Данный класс описывает отдельную задачу, которая запускается асинхронно в 
одном из потоков из пула потоков. Хотя ее также можно запускать синхронно 
в текущем потоке.

Для определения и запуска задачи можно использовать различные способы. 
**Первый способ** создание объекта `Task` и вызов у него метода _Start_:

```csharp
Task task = new Task( () => Console.WriteLine("Hello Task!") );
task.Start();
```

Метод _Start_ запускает задачу.

> Если запустить код в таком виде, то строку "Hello Task" мы в консоли не увидим. 
> Дело в том, что процесс запуска потока не моментальный и программа успеет завершиться до запуска потока.

**Второй способ** заключается в использовании статического метода `Task.Factory.StartNew()`. 
Этот метод также в качестве параметра принимает делегат **Action**, 
который указывает, какое действие будет выполняться. 
При этом этот метод сразу же **запускает задачу**:

```csharp
Task task = Task.Factory.StartNew( () => Console.WriteLine("Hello Task!") );
```

В качестве результата метод возвращает запущенную задачу.

**Третий способ** определения и запуска задач представляет использование статического метода `Task.Run()`:
```csharp
Task task = Task.Run( () => Console.WriteLine("Hello Task!") );
```

### Пример использования [_new Task_](https://github.com/logitac/LabsOnCs/tree/master/labs/Lab8/NewTask.cs):
```csharp
public class NewTask
{
    static void Main()
    {
        Console.WriteLine("Программа стартовала");
        
        // Создаём задачу, но пока НЕ запускаем
        Task task = new Task(() => 
        {
            for (int i = 1; i <= 5; i++)
            {
                Console.WriteLine($"Секунда {i}");
                Thread.Sleep(1000); // Ждём 1 секунду
            }
        });
        
        Console.WriteLine("Задача создана, но ещё не запущена");
        Console.WriteLine("Нажмите Enter, чтобы запустить задачу...");
        Console.ReadLine(); // Ждём нажатия клавиши
        
        // Только теперь запускаем
        task.Start();
        
        Console.WriteLine("Задача запущена!");
        Console.ReadLine();
    }
}
```

### Вывод:
```
Задача создана, но ещё не запущена
Нажмите Enter, чтобы запустить задачу...

Задача запущена!
Секунда 1
// прошла секунда Thread.Sleep(1000)
Секунда 2
// прошла ещё секунда
Секунда 3
Секунда 4
Секунда 5

Process finished with exit code 0.
```